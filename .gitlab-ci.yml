stages:
  - docker_push
  - deploy

variables:
  VERSION: "0.0.1"
  REGISTRY_URL: "registry.gitlab.com/wisenut-research/ctr/research/mlops/ml-ops-frontend"

docker_push:
  stage: docker_push
  before_script:
    - docker login -u "$CI_REGISTRY_USER" -p "$CI_REGISTRY_PASSWORD" $CI_REGISTRY
  script:
    - docker build -t $REGISTRY_URL:$VERSION .
    - docker push $REGISTRY_URL:$VERSION
  tags:
    - mlops-frontend

deploy-prod:
  stage: deploy
  script:
    - echo "This job deploys something from the branch."
  tags:
    - mlops-frontend
